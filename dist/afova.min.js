"use strict";const R="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let B=(o=21)=>{let l="",u=crypto.getRandomValues(new Uint8Array(o));for(;o--;)l+=R[u[o]&63];return l};var E=(o=>(o.badInput="badInput",o.customError="customError",o.patternMismatch="patternMismatch",o.rangeOverflow="rangeOverflow",o.rangeUnderflow="rangeUnderflow",o.stepMismatch="stepMismatch",o.tooLong="tooLong",o.tooShort="tooShort",o.typeMismatch="typeMismatch",o.valueMissing="valueMissing",o))(E||{}),M=(o=>(o.pattern="pattern",o.max="max",o.min="min",o.step="step",o.maxlength="maxlength",o.minlength="minlength",o.type="type",o.required="required",o))(M||{});const j={badInput:void 0,customError:void 0,patternMismatch:"pattern",rangeOverflow:"max",rangeUnderflow:"min",stepMismatch:"step",tooLong:"maxlength",tooShort:"minlength",typeMismatch:"type",valueMissing:"required"};function H(o){return j[o]}const P={pattern:"patternMismatch",max:"rangeOverflow",min:"rangeUnderflow",step:"stepMismatch",maxlength:"tooLong",minlength:"tooShort",type:"typeMismatch",required:"valueMissing"};function X(o){return P[o]}const _={badInput:"The input {{input}} is not a valid {{type}}",customError:"The input {{input}} is not valid",patternMismatch:"The value {{input}} does not match the required pattern of {{constraint}}",rangeOverflow:"The value {{input}} is too big. It cannot be bigger than {{constraint}}.",rangeUnderflow:"The value {{input}} is too small. It must be at least {{constraint}}.",stepMismatch:"The value {{input}} is not in within the correct step interval of {{constraint}}",tooLong:"The value {{input}} is too long. It cannot be longer than {{constraint}} characters.",tooShort:"The value {{input}} is too short. It must be at least {{constraint}} characters long.",typeMismatch:"The value {{input}} must be a {{constraint}}",valueMissing:"Please provide the {{type}} value"},S="form",x=".afova-form-message-container",G={selector:S,formMessageSelector:x,validateOnChange:!1,focusOnFirstError:!0},K=["color","date","datetime-local","email","month","number","range","tel","time","url","week"],W=["submit","reset","button","fieldset","image"];function Y(o){function l(t){t.id||(t.id=`afova-${B()}`)}function u(t){const e=A(t)||t;return document.querySelector(`#${e.id}-afova-message-container`)||void 0}function f(t){g(t)?t.style.display="none":t.style.display=""}function v(t){const e=t.closest("form");if(e){const a=e.getAttribute("afova-form-message-container-id");if(a)return document.querySelector(`#${a}`)||void 0}}function g(t){return t.children.length==0}function I(t){var e;let a=u(t);if(!a){const n=A(t)||t;a=document.createElement("DIV"),(e=n.parentNode)==null||e.insertBefore(a,n),a.id=`${n.id}-afova-message-container`,a.classList.add("afova-message-container"),t.setAttribute("aria-errormessage",a.id)}return a}function V(t){if(t.type=="radio"&&t.name){const e=document.querySelectorAll(`input[name="${t.name}"][type="radio"]`),a=u(t);if(a){for(let n of e)if(a.querySelector(`[afova-message-for="${n.id}"]`))return!0}}return!1}function C(t,e){if(t!="customError"){let a=H(t),n=e.dataset[a||t.toLowerCase()]||e.dataset[t.toLowerCase()]||_[t];const i=e.getAttribute(a||"");if(i){let c=new RegExp("{{\\s*constraint\\s*}}","ig");n=n.replace(c,i)}let s=new RegExp("{{\\s*input\\s*}}","ig");return n=n.replace(s,e.value),s=new RegExp("{{\\s*type\\s*}}","ig"),n=n.replace(s,e.type),n}return e.validationMessage}function T(t){var e,a;const n=m(t);if(n){let i=n.querySelector(".afova-label");if(!i&&n.tagName!="LABEL"&&(i=n.querySelector("label")),i||(i=n),i){let s="";for(const c of i.childNodes)c.nodeType==Node.TEXT_NODE&&(s&&(e=c.textContent)!=null&&e.trim()&&(s+=" "),(a=c.textContent)!=null&&a.trim()&&(s+=c.textContent.trim()));return s}}return""}function $(t,e){const a=v(t);if(a){let n;a.tagName=="UL"||a.tagName=="OL"?n=document.createElement("LI"):n=document.createElement("DIV"),n.setAttribute("afova-message-for",t.id),n.classList.add("afova-collected-message");const i=T(t);if(i){const c=document.createElement("DIV");c.innerText=i,c.classList.add("afova-message-label"),n.appendChild(c)}const s=document.createElement("DIV");s.innerText=e,s.classList.add("afova-message"),n.appendChild(s),a.appendChild(n),f(a)}}function p(t){t.removeAttribute("aria-invalid"),t.removeAttribute("aria-errormessage"),t.setCustomValidity("");const e=document.querySelectorAll(`[afova-message-for="${t.id}"]`);for(const s of e)s.remove();const a=u(t);a&&g(a)&&a.remove();const n=v(t);n&&f(n);let i=m(t);i&&document.querySelectorAll(`#${i.id} [aria-invalid].afova-control`).length==0&&i.classList.remove("afova-active")}function h(t){if(!t.validity.valid&&!V(t)){const e=m(t);e&&e.classList.add("afova-active"),t.setAttribute("aria-invalid","true");const a=I(t);let n;a.tagName=="UL"||a.tagName=="OL"?n=document.createElement("LI"):n=document.createElement("DIV"),n.classList.add("afova-message"),n.setAttribute("afova-message-for",t.id),a.appendChild(n);for(const i in E)if(t.validity[i]){let s=C(i,t);s&&(n.innerHTML=s,$(t,s));break}}}async function y(t,e=!0){return p(t),t.validity.valid&&(r.onValidateControl&&r.onValidateControl(t),r.onAsyncValidateControl&&await r.onAsyncValidateControl(t)),e&&h(t),t.validity.valid}function d(t){const e=[];for(const a of t.elements)W.includes(a.type)||e.push(a);return e}async function q(t){for(const a of d(t))await y(a,!1);t.checkValidity()&&(r.onValidateForm&&r.onValidateForm(t),r.onAsyncValidateForm&&await r.onAsyncValidateForm(t));let e;for(const a of d(t))h(a),r.focusOnFirstError&&!a.validity.valid&&!e&&(e=a,e.focus());return t.checkValidity()}function O(t){for(let e of d(t))p(e)}function N(){const t=document.querySelectorAll(r.selector||S);for(const e of t){l(e),e.addEventListener("submit",b),e.addEventListener("reset",L);for(const n of d(e))D(n);e.setAttribute("novalidate","");const a=e.querySelector(r.formMessageSelector||x);a&&(l(a),f(a),e.setAttribute("afova-form-message-container-id",a.id),a.classList.add("afova-form-message-container"))}}async function b(t){if(t.preventDefault(),!await q(t.target)){r.onInvalid&&r.onInvalid(t);return}r.onValid&&r.onValid(t),r.onSubmit?r.onSubmit(t):t.target.submit()}function L(t){O(t.target),r.onReset&&r.onReset(t)}function F(){const t=document.querySelectorAll(r.selector||"form");for(const e of t){e.removeAttribute("novalidate"),e.removeEventListener("submit",b),e.removeEventListener("reset",L);for(const a of d(e))k(a)}}function U(t){const e=t.getAttributeNames().map(a=>a.toLowerCase());for(const a in M)if(e.includes(a)&&!t.getAttribute(`data-${a}`)&&!t.getAttribute(`data-${X(a).toLowerCase()}`)&&(a!="type"||a=="type"&&K.includes(t.type))){const n=t.getAttribute("name");console.warn(n?`afova: Missing attribute [data-${a}] for the control with [name="${n}"]. Therefore only a fallback message will be used in case of a [${a}] constraint violation. It is recommended to define the violation message with the [data-${a}] attribute.`:`afova: Missing attribute [data-${a}] for the control with [id="${t.id}"]. Therefore only a fallback message will be used in case of a [${a}] constraint violation. It is recommended to define the violation message with the [data-${a}] attribute.`)}}function D(t){l(t),m(t),t.classList.add("afova-control"),r.validateOnChange&&t.addEventListener("change",w),U(t)}async function w(t){await y(t.target)||t.target.focus()}function k(t){t.classList.remove("afova-control"),t.removeEventListener("change",w)}function m(t){let e=t.closest(".afova-context");return e||(e=t.closest("label")),e&&(l(e),e.classList.add("afova-context"),e.tagName=="LABEL"&&!e.htmlFor&&(e.htmlFor=t.id)),e||void 0}function A(t){const e=t.closest(".afova-group");return e&&l(e),e||void 0}let r=Object.assign({},G,o);return N(),{clear:()=>F()}}export{Y as afova};
//# sourceMappingURL=afova.min.js.map
