"use strict";const H="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let P=(a=21)=>{let l="",u=crypto.getRandomValues(new Uint8Array(a));for(;a--;)l+=H[u[a]&63];return l};var A=(a=>(a.badInput="badInput",a.customError="customError",a.patternMismatch="patternMismatch",a.rangeOverflow="rangeOverflow",a.rangeUnderflow="rangeUnderflow",a.stepMismatch="stepMismatch",a.tooLong="tooLong",a.tooShort="tooShort",a.typeMismatch="typeMismatch",a.valueMissing="valueMissing",a))(A||{}),S=(a=>(a.pattern="pattern",a.max="max",a.min="min",a.step="step",a.maxlength="maxlength",a.minlength="minlength",a.type="type",a.required="required",a))(S||{});const X={badInput:void 0,customError:void 0,patternMismatch:"pattern",rangeOverflow:"max",rangeUnderflow:"min",stepMismatch:"step",tooLong:"maxlength",tooShort:"minlength",typeMismatch:"type",valueMissing:"required"};function _(a){return X[a]}const G={pattern:"patternMismatch",max:"rangeOverflow",min:"rangeUnderflow",step:"stepMismatch",maxlength:"tooLong",minlength:"tooShort",type:"typeMismatch",required:"valueMissing"};function J(a){return G[a]}const K={badInput:"The input {{input}} is not a valid {{type}}",customError:"The input {{input}} is not valid",patternMismatch:"The value {{input}} does not match the required pattern of {{constraint}}",rangeOverflow:"The value {{input}} is too big. It cannot be bigger than {{constraint}}.",rangeUnderflow:"The value {{input}} is too small. It must be at least {{constraint}}.",stepMismatch:"The value {{input}} is not in within the correct step interval of {{constraint}}",tooLong:"The value {{input}} is too long. It cannot be longer than {{constraint}} characters.",tooShort:"The value {{input}} is too short. It must be at least {{constraint}} characters long.",typeMismatch:"The value {{input}} must be of type {{constraint}}",valueMissing:"Please provide a {{type}} value"},x="form",I=".afova-form-message-container",Q={selector:x,formMessageSelector:I,validateOnChange:!1,focusOnFirstError:!0},W=["color","date","datetime-local","email","month","number","range","tel","time","url","week"],Y=["submit","reset","button","fieldset","image"];function Z(a){function l(t){t.id||(t.id=`afova-${P()}`)}function u(t){const e=M(t)||t;return document.querySelector(`#${e.id}-afova-message-container`)}function m(t){p(t)?t.style.display="none":t.style.display=""}function g(t){const e=t.closest("form");if(e){const n=e.getAttribute("afova-form-message-container-id");if(n)return document.querySelector(`#${n}`)}return null}function p(t){return t.children.length==0}function q(t){var e;let n=u(t);if(!n){const o=M(t)||t;n=document.createElement("ul"),(e=o.parentNode)==null||e.insertBefore(n,o),n.id=`${o.id}-afova-message-container`,n.classList.add("afova-message-container"),t.setAttribute("aria-errormessage",n.id)}return n}function T(t){if(t.type=="radio"&&t.name){const e=document.querySelectorAll(`input[name="${t.name}"][type="radio"]`),n=u(t);if(n){for(let o of e)if(n.querySelector(`[afova-message-for="${o.id}"]`))return!0}}return!1}function $(t,e){if(t!="customError"){let n=_(t),o=e.dataset[n||t.toLowerCase()]||e.dataset[t.toLowerCase()]||K[t];const r=e.getAttribute(n||"");if(r){let c=new RegExp("{{\\s*constraint\\s*}}","ig");o=o.replace(c,r)}let i=new RegExp("{{\\s*input\\s*}}","ig");return o=o.replace(i,e.value),i=new RegExp("{{\\s*type\\s*}}","ig"),o=o.replace(i,e.type),o}return e.validationMessage}function C(t){var e,n;const o=d(t);if(o){let r=o.querySelector(".afova-label");if(!r&&o.tagName!="LABEL"&&(r=o.querySelector("label")),r||(r=o),r){let i="";for(const c of r.childNodes)c.nodeType==Node.TEXT_NODE&&(i&&(e=c.textContent)!=null&&e.trim()&&(i+=" "),(n=c.textContent)!=null&&n.trim()&&(i+=c.textContent.trim()));return i}}return""}function O(t,e){const n=g(t);if(n){let o;n.tagName=="UL"||n.tagName=="OL"?o=document.createElement("LI"):o=document.createElement("DIV"),o.setAttribute("afova-message-for",t.id),o.classList.add("afova-collected-message");const r=C(t);if(r){const c=document.createElement("DIV");c.innerText=r,c.classList.add("afova-message-label"),o.appendChild(c)}const i=document.createElement("DIV");i.innerText=e,i.classList.add("afova-message"),o.appendChild(i),n.appendChild(o),m(n)}}function N(t){const e=q(t),n=t.validity;let o;e.tagName=="UL"||e.tagName=="OL"?o=document.createElement("LI"):o=document.createElement("DIV"),o.classList.add("afova-message"),o.setAttribute("afova-message-for",t.id),e.appendChild(o);for(const r in A)if(n[r]){let i=$(r,t);i&&(o.innerHTML=i,O(t,i));break}}function h(t){t.removeAttribute("aria-invalid"),t.removeAttribute("aria-errormessage");const e=document.querySelectorAll(`[afova-message-for="${t.id}"]`);for(const i of e)i.remove();const n=u(t);n&&p(n)&&n.remove();let o=d(t);o&&document.querySelectorAll(`#${o.id} [aria-invalid].afova-control`).length==0&&o.classList.remove("afova-active");const r=g(t);r&&m(r)}function V(t,e){const n=d(t);n&&n.classList.add("afova-active"),t.setAttribute("aria-invalid","true"),T(t)||(N(t),e&&t.focus())}function y(t,e){return h(t),t.validity.valid||V(t,e),t.validity.valid}function f(t){const e=[];for(const n of t.elements)Y.includes(n.type)||e.push(n);return e}function b(t){if(t)return t.checkValidity();{const e=document.querySelectorAll(s.selector||"form");for(const n of e)if(!n.checkValidity())return!1;return!0}}function v(t,e){let n;const o=t.checkValidity();if(!o){for(const r of f(t))y(r)||n||(n=r);n&&(e?.preventDefault(),s.focusOnFirstError&&n.focus())}return o}function D(t){if(t)return v(t);{let e=!0;const n=document.querySelectorAll(s.selector||"form");for(const o of n)v(o)||(e=!1);return e}}function U(t){for(let e of f(t))h(e)}function k(){const t=document.querySelectorAll(s.selector||x);for(const e of t){l(e),e.addEventListener("submit",L),e.addEventListener("reset",w);for(const o of f(e))B(o);e.setAttribute("novalidate","");const n=e.querySelector(s.formMessageSelector||I);n&&(l(n),m(n),e.setAttribute("afova-form-message-container-id",n.id),n.classList.add("afova-form-message-container"))}}function L(t){if(!v(t.target,t)){t.preventDefault(),s.onInvalid&&s.onInvalid(t);return}s.onValid&&s.onValid(t),s.onSubmit&&(t.preventDefault(),s.onSubmit(t))}function w(t){U(t.target),s.onReset&&s.onReset(t)}function R(){const t=document.querySelectorAll(s.selector||"form");for(const e of t){e.removeAttribute("novalidate"),e.removeEventListener("submit",L),e.removeEventListener("reset",w);for(const n of f(e))j(n)}}function F(t){const e=t.getAttributeNames().map(n=>n.toLowerCase());for(const n in S)if(e.includes(n)&&!t.getAttribute(`data-${n}`)&&!t.getAttribute(`data-${J(n).toLowerCase()}`)&&(n!="type"||n=="type"&&W.includes(t.type))){const o=t.getAttribute("name");console.warn(o?`afova: Missing attribute [data-${n}] for the control with [name="${o}"]. Therefore only a fallback message will be used in case of a [${n}] constraint violation. It\xB4s strongly recommended to define the violation message with the [data-${n}] attribute.`:`afova: Missing attribute [data-${n}] for the control with [id="${t.id}"]. Therefore only a fallback message will be used in case of a [${n}] constraint violation. It\xB4s strongly recommended to define the violation message with the [data-${n}] attribute.`)}}function B(t){l(t),d(t),t.classList.add("afova-control"),s.validateOnChange&&t.addEventListener("change",E),F(t)}function E(t){y(t.target,!0)}function j(t){t.classList.remove("afova-control"),t.removeEventListener("change",E)}function d(t){let e=t.closest(".afova-context");return e||(e=t.closest("label")),e&&(l(e),e.classList.add("afova-context"),e.tagName=="LABEL"&&!e.htmlFor&&(e.htmlFor=t.id)),e}function M(t){const e=t.closest(".afova-group");return e&&l(e),e}let s=Object.assign({},Q,a);return k(),{clear:()=>R(),isValid:t=>b(t),isInvalid:t=>!b(t),validate:t=>D(t)}}export{Z as afova};
//# sourceMappingURL=afova.min.js.map
